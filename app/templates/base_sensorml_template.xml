{% block opening %}
{% include 'physical_system_sensorml_start_template.xml' %}
{% endblock %}
    {% block description %}
    {% if obj.description %}
    <!-- ========================================================================= -->
    <!--                  System Description                                       -->
    <!-- ========================================================================= -->
    <gml:description>{{obj.description}}</gml:description>
    {% endif %}
    {% endblock %}
    {% block identifiers %}
    <!-- ========================================================================= -->
    <!--                  Identifiers                                              -->
    <!-- ========================================================================= -->
    <sml:identification>
        <sml:IdentifierList>
            {% if obj.persistent_identifier %}
            <sml:identifier>
                <sml:Term definition="http://sensorml.com/ont/swe/property/Identifier">
                    <sml:label>handle</sml:label>
                    <sml:value>{{obj.persistent_identifier}}</sml:value>
                </sml:Term>
            </sml:identifier>
            {% endif %}
            {% if obj.long_name %}
            <sml:identifier>
                <sml:Term definition="http://sensorml.com/ont/swe/property/LongName">
                    <sml:label>Long Name</sml:label>
                    <sml:value>{{obj.long_name}}</sml:value>
                </sml:Term>
            </sml:identifier>
            {% endif %}
            <sml:identifier>
                <sml:Term definition="http://sensorml.com/ont/swe/property/ShortName">
                    <sml:label>Short Name</sml:label>
                    <sml:value>{{obj.short_name}}</sml:value>
                </sml:Term>
            </sml:identifier>
            {% if obj.model %}
            <sml:identifier>
                <sml:Term definition="http://sensorml.com/ont/swe/property/ModelNumber">
                    <sml:label>Model Number</sml:label>
                    <sml:value>{{obj.model}}</sml:value>
                </sml:Term>
            </sml:identifier>
            {% endif %}
            {% if obj.status_name %}
            <sml:identifier>
                <sml:Term definition="http://sensorml.com/ont/swe/property/SystemStatus">
                    <sml:label>System Status</sml:label>
                    <sml:value>{{obj.status_name}}</sml:value>
                </sml:Term>
            </sml:identifier>
            {% endif %}
            {% if obj.serial_number %}
            <sml:identifier>
                <sml:Term definition="http://sensorml.com/ont/swe/property/SerialNumber">
                    <sml:label>Serial Number</sml:label>
                    <sml:value>{{obj.serial_number}}</sml:value>
                </sml:Term>
            </sml:identifier>
            {% endif %}
            {% if obj.manufacturer_name %}
            <sml:identifier>
                <sml:Term definition="http://sensorml.com/ont/swe/property/Manufacturer">
                    <sml:label>Manufacturer</sml:label>
                    <sml:value>{{obj.manufacturer_name}}</sml:value>
                </sml:Term>
            </sml:identifier>
            {% endif %}
        </sml:IdentifierList>
    </sml:identification>
    {% endblock %}

    {% block classifiers %}
    {% if obj.obj_type_name %}
    <!-- ========================================================================= -->
    <!--                  Classifiers                                              -->
    <!-- ========================================================================= -->
    {# TODO Check if we still need this block here, as the types are specific for our classes #}
    <sml:classification>
        <sml:ClassifierList>
            <sml:classifier>
                <sml:Term definition="http://sensorml.com/ont/swe/property/SensorType">
                    <sml:label>Sensor Type</sml:label>
                    <sml:value>{{obj.obj_type_name}}</sml:value>
                </sml:Term>
            </sml:classifier>
            <sml:classifier>
                <sml:Term definition="http://sensorml.com/ont/swe/property/Manufacturer">
                    <sml:label>Manufacturer</sml:label>
                    <sml:value>{{obj.manufacturer_name}}</sml:value>
                </sml:Term>
            </sml:classifier>
        </sml:ClassifierList>
    </sml:classification>
    {% endif %}
    {% endblock %}
    {% block documentation %}
    {# TODO Adopt it, so that we can extract attachments of devices, platforms & configurations #}
    {% if obj.device_attachments or obj.website %}
    <!-- ========================================================================= -->
    <!--                 Documentation                                             -->
    <!-- ========================================================================= -->
    <sml:documentation>
        <sml:DocumentList>
            {% if obj.device_attachments %}
            {% for attachment in obj.device_attachments %}
            <sml:document xlink:arcrole="Attachment">
                <gmd:CI_OnlineResource id="Attachment_{{attachment.id}}_of_PhysicalSystem_{{gmlId}}">
                    <gmd:linkage>
                        <gmd:URL>
                            {{attachment.url}}
                        </gmd:URL>
                    </gmd:linkage>
                    <gmd:name>
                        <gco:CharacterString>{{attachment.label}}
                        </gco:CharacterString>
                    </gmd:name>
                </gmd:CI_OnlineResource>
            </sml:document>
            {% endfor %}
            {% endif %}
            {% if obj.website %}
            <sml:document xlink:arcrole="Website">
                <gmd:CI_OnlineResource>
                    <gmd:linkage>
                        <gmd:URL>{{obj.website}}
                        </gmd:URL>
                    </gmd:linkage>
                </gmd:CI_OnlineResource>
            </sml:document>
            {% endif %}
        </sml:DocumentList>
    </sml:documentation>
    {% endif %}
    {% endblock %}

    {% include 'contact_sensorml_template.xml' %}
    {% block outputs %}{% endblock %}
    {% block history %}{% endblock %}
{% block finish %}
</sml:PhysicalSystem>
{% endblock %}
